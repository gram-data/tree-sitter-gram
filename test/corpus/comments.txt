==================
Line comment standalone
==================

// This is a line comment
(hello)

---

(gram
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))))

==================
Multiple line comments
==================

// First comment
// Second comment
(hello)
// Third comment

---

(gram
  (comment)
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)))
  (comment))

==================
Line comment with special characters
==================

// This comment has [brackets] and (parens) and {braces}
(hello)

---

(gram
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))))

==================
Line comment at file start
==================

// File header comment
(hello)-->(world)

---

(gram
  (comment)
  (annotated_pattern
    elements: (relationship_pattern
      left: (node_pattern
        identifier: (symbol))
      kind: (right_arrow)
      right: (node_pattern
        identifier: (symbol)))))

==================
Line comment at file end
==================

(hello)-->(world)
// End of file comment

---

(gram
  (annotated_pattern
    elements: (relationship_pattern
      left: (node_pattern
        identifier: (symbol))
      kind: (right_arrow)
      right: (node_pattern
        identifier: (symbol))))
  (comment))

==================
Empty line comment
==================

//
(hello)

---

(gram
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))))

==================
Comment markers in string literals preserved
==================

(hello {text: "URL: https://example.com // not a comment"})

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)
      record: (record
        (record_property
          key: (symbol)
          value: (string_literal
            content: (string_content)))))))

==================
Comment before top-level node
==================

// Comment before a node
(hello)

---

(gram
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))))

==================
Comment before top-level relationship
==================

// Comment before a relationship
(hello)-->(world)

---

(gram
  (comment)
  (annotated_pattern
    elements: (relationship_pattern
      left: (node_pattern
        identifier: (symbol))
      kind: (right_arrow)
      right: (node_pattern
        identifier: (symbol)))))

==================
Comment before top-level pattern
==================

// Comment before a pattern
[Person {name: "Alice"}]

---

(gram
  (comment)
  (annotated_pattern
    elements: (subject_pattern
      identifier: (symbol)
      record: (record
        (record_property
          key: (symbol)
          value: (string_literal
            content: (string_content)))))))

==================
Comment before graph-level record
==================

// Comment before graph-level record
{name: "Graph", version: 1.0}
(hello)

---

(gram
  (comment)
  root: (record
    (record_property
      key: (symbol)
      value: (string_literal
        content: (string_content)))
    (record_property
      key: (symbol)
      value: (decimal)))
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))))

==================
End-of-line comment after node
==================

(hello)  // End-of-line comment after node

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)))
  (comment))

==================
End-of-line comment after relationship
==================

(hello)-->(world)  // End-of-line comment after relationship

---

(gram
  (annotated_pattern
    elements: (relationship_pattern
      left: (node_pattern
        identifier: (symbol))
      kind: (right_arrow)
      right: (node_pattern
        identifier: (symbol))))
  (comment))

==================
End-of-line comment after subject
==================

[Person {name: "Alice"}]  // End-of-line comment after subject

---

(gram
  (annotated_pattern
    elements: (subject_pattern
      identifier: (symbol)
      record: (record
        (record_property
          key: (symbol)
          value: (string_literal
            content: (string_content))))))
  (comment))

==================
End-of-line comment after pattern element
==================

(hello), (world)  // End-of-line comment after pattern elements

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))
    elements: (node_pattern
      identifier: (symbol)))
  (comment))

==================
Multiple end-of-line comments
==================

(hello)  // First comment
(world)  // Second comment

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)))
  (comment)
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)))
  (comment))

==================
End-of-line comment with special characters
==================

(hello)  // This comment has [brackets] and (parens) and {braces}

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol)))
  (comment))

==================
Comment between pattern elements after comma
==================

(hello),  // Comment after comma
(world)

---

(gram
  (annotated_pattern
    elements: (node_pattern
      identifier: (symbol))
    (comment)
    elements: (node_pattern
      identifier: (symbol))))

==================
In-line comment between adjacent tokens (subject_patterns)
:error
==================

[// comment]

---

(gram
  (ERROR)
  (comment))

==================
In-line comment between adjacent tokens (braces)
:error
==================

{// comment}

---

(gram
  (ERROR)
  (comment))

==================
In-line comment between adjacent tokens (parentheses)
:error
==================

(// comment)

---

(gram
  (ERROR)
  (comment))

